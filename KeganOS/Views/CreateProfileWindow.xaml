<Window x:Class="KeganOS.Views.CreateProfileWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Create Profile" 
        Height="520" Width="420"
        WindowStartupLocation="CenterOwner"
        Background="#0D0D0D"
        FontFamily="Consolas"
        WindowStyle="None"
        ResizeMode="NoResize"
        AllowsTransparency="True">
    
    <Border BorderBrush="#333333" BorderThickness="1">
        <Grid Margin="30">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,20">
                <TextBlock Text="Create Profile" Foreground="#FFFFFF" FontSize="20"/>
                <TextBlock Text="Set up your personal space." Foreground="#666666" FontSize="11" Margin="0,5,0,0"/>
            </StackPanel>
            
            <!-- Form -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <!-- Display Name -->
                    <TextBlock Text="â”‚ Display Name" Foreground="#888888" FontSize="11" Margin="0,0,0,5"/>
                    <TextBox x:Name="DisplayNameInput" 
                             Background="#1A1A1A" Foreground="#FFFFFF"
                             BorderBrush="#333333" BorderThickness="1"
                             Padding="10,8" FontSize="13"/>
                    <TextBlock Text="  Your name as it appears in the app" 
                               Foreground="#444444" FontSize="9" Margin="0,3,0,0"/>
                    
                    <!-- Personal Symbol -->
                    <TextBlock Text="â”‚ Personal Symbol" Foreground="#888888" FontSize="11" Margin="0,20,0,5"/>
                    <TextBox x:Name="SymbolInput" 
                             Background="#1A1A1A" Foreground="#FFFFFF"
                             BorderBrush="#333333" BorderThickness="1"
                             Padding="10,8" FontSize="13"
                             MaxLength="20"/>
                    <TextBlock Text="  A unique identifier or emoji (default: ðŸ¦­)" 
                               Foreground="#444444" FontSize="9" Margin="0,3,0,0"/>
                    
                    <!-- Avatar -->
                    <TextBlock Text="â”‚ Avatar (optional)" Foreground="#888888" FontSize="11" Margin="0,20,0,5"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid Width="50" Height="50" Margin="0,0,10,0">
                            <Ellipse Width="50" Height="50" Fill="#333333"/>
                            <TextBlock x:Name="AvatarPlaceholder" Text="ðŸ‘¤" FontSize="28" 
                                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Ellipse x:Name="AvatarPreview" Width="50" Height="50" Visibility="Collapsed">
                                <Ellipse.Fill>
                                    <ImageBrush x:Name="AvatarImageBrush" Stretch="UniformToFill"/>
                                </Ellipse.Fill>
                            </Ellipse>
                        </Grid>
                        <Button Grid.Column="1" x:Name="AvatarBrowseButton" Content="Choose Image..."
                                Background="#1A1A1A" Foreground="#AAAAAA"
                                BorderBrush="#333333" BorderThickness="1"
                                Padding="15,8" FontSize="11" Cursor="Hand"
                                HorizontalAlignment="Left" VerticalAlignment="Center"
                                Click="AvatarBrowseButton_Click"/>
                    </Grid>
                    <TextBlock Text="  Upload a .png, .jpg, or .gif image" 
                               Foreground="#444444" FontSize="9" Margin="0,3,0,0"/>
                    <!-- Journal File -->
                    <TextBlock Text="â”‚ KEGOMODORO Journal File" Foreground="#888888" FontSize="11" Margin="0,20,0,5"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="JournalFileInput" 
                                 Background="#1A1A1A" Foreground="#AAAAAA"
                                 BorderBrush="#333333" BorderThickness="1"
                                 Padding="10,8" FontSize="11"
                                 IsReadOnly="True"
                                 Text="No file selected"/>
                        <Button Grid.Column="1" Content="[ Browse ]" 
                                Background="Transparent" Foreground="#87CEEB"
                                BorderThickness="0" Padding="10,8" Cursor="Hand"
                                Click="BrowseButton_Click"/>
                    </Grid>
                    <TextBlock Text="  Select your existing diary.txt or create new" 
                               Foreground="#444444" FontSize="9" Margin="0,3,0,0"/>
                    
                    <!-- Journal Status -->
                    <Border x:Name="JournalStatusPanel" Visibility="Collapsed" 
                            Background="#1A2A1A" BorderBrush="#2A4A2A" BorderThickness="1"
                            Padding="10" Margin="0,10,0,0">
                        <StackPanel>
                            <TextBlock x:Name="JournalStatusText" Foreground="#88CC88" FontSize="11" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Pixe.la (Optional) -->
                    <TextBlock Text="â”‚ Pixe.la Username (optional)" Foreground="#555555" FontSize="11" Margin="0,20,0,5"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="PixelaUsernameInput" 
                                 Background="#1A1A1A" Foreground="#FFFFFF"
                                 BorderBrush="#333333" BorderThickness="1"
                                 Padding="10,8" FontSize="13"/>
                        <Button Grid.Column="1" Content="[ Check ]" 
                                Background="Transparent" Foreground="#87CEEB"
                                BorderThickness="0" Padding="10,8" Cursor="Hand"
                                x:Name="CheckUsernameButton"
                                Click="CheckUsernameButton_Click"/>
                    </Grid>
                    <TextBlock Text="  For habit tracking integration (lowercase letters, numbers, hyphens)" 
                               Foreground="#444444" FontSize="9" Margin="0,3,0,0"/>
                    
                    <!-- Token input (shown for existing Pixe.la users) -->
                    <StackPanel x:Name="TokenInputPanel" Visibility="Collapsed" Margin="0,10,0,0">
                        <TextBlock Text="â”‚ Your Pixe.la Token" Foreground="#555555" FontSize="11" Margin="0,0,0,5"/>
                        <PasswordBox x:Name="PixelaTokenInput" 
                                     Background="#1A1A1A" Foreground="#FFFFFF"
                                     BorderBrush="#333333" BorderThickness="1"
                                     Padding="10,8" FontSize="13"/>
                        <TextBlock Text="  Enter your existing Pixe.la token to connect" 
                                   Foreground="#444444" FontSize="9" Margin="0,3,0,0"/>
                    </StackPanel>
                    
                    <!-- Pixe.la Status -->
                    <Border x:Name="PixelaStatusPanel" Visibility="Collapsed" 
                            Background="#1A1A1A" BorderBrush="#333333" BorderThickness="1"
                            Padding="10" Margin="0,10,0,0">
                        <TextBlock x:Name="PixelaStatusText" Foreground="#AAAAAA" FontSize="11" TextWrapping="Wrap"/>
                    </Border>
                </StackPanel>
            </ScrollViewer>
            
            <!-- Buttons -->
            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,20,0,0">
                <Button Content="[ Cancel ]" 
                        Background="Transparent" Foreground="#666666"
                        BorderThickness="0" Padding="15,8" Cursor="Hand"
                        Click="CancelButton_Click"/>
                <Button Content="[ Create ]" 
                        Background="Transparent" Foreground="#87CEEB"
                        BorderThickness="0" Padding="15,8" Cursor="Hand"
                        Click="CreateButton_Click"/>
            </StackPanel>
        </Grid>
    </Border>
</Window>
